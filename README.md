# BCFSleuth V2.0

<img width="512" height="512" alt="BCFSleuth_Logo_Color" src="https://github.com/user-attachments/assets/fdd735de-e809-4736-a01c-0c054071b8e9" />

A comprehensive web-based BCF (Building Collaboration Format) platform with universal format support, intelligent field discovery, advanced data exploration, and complete image management capabilities.


## 🤖 AI-Assisted Development Success Story

This project demonstrates advanced human-AI collaboration in enterprise software development:

- **🧠 AI Partner**: Claude (Anthropic) for architecture, implementation, and systematic problem-solving
- **⚡ Production Quality**: Enterprise-grade features with comprehensive error handling
- **🏗️ Domain Integration**: AECO/BIM expertise combined with cutting-edge AI capabilities
- **🎯 Systematic Excellence**: V2.0 represents 1,300+ lines of production-ready code

**Innovation Impact**: BCFSleuth V2.0 showcases how AI-assisted development can rapidly deliver sophisticated, professional-grade applications while maintaining enterprise quality standards.

## 🚀 **Version 2.0 - Complete BCF Platform with Image Management**

**BCFSleuth V2.0 Phase 1 Complete - Now featuring comprehensive image management:**
- ✅ **Universal BCF Support** - All formats (2.0, 2.1, 3.0) with intelligent adaptation
- ✅ **Complete Image System** - Professional lightbox, downloads, PDF reports
- ✅ **Advanced Analytics** - Data exploration, filtering, export templates
- ✅ **Enterprise Features** - Configuration management, session persistence
- ✅ **Mobile Optimized** - Touch-friendly across all features

## 🖼️ **NEW: Complete Image Management System (V2.0 Phase 1)**

### **Professional Image Viewer**
- **Enhanced Lightbox** - Full-screen viewing with professional modal overlay
- **Advanced Zoom Controls** - Mouse wheel, keyboard shortcuts (+/-/0/F keys), click controls
- **Smart Navigation** - Arrow keys, click navigation with cycling, ESC to close
- **Image Metadata** - Topic title, status, author, date displayed in header
- **Mobile Touch Support** - Pinch zoom, swipe navigation, touch-optimized controls

### **Comprehensive Download System**
- **Individual Downloads** - Smart filenames: `ProjectName_TopicTitle_View1_2025-08-04.png`
- **Bulk Downloads** - Sequential downloads with progress tracking and time estimates
- **ZIP Archives** - Professional compression with folder structure: `ProjectName_BCF_Images_2025-08-04.zip`
- **Progress Feedback** - Real-time updates with cancellation support for large collections

### **Professional PDF Report Generation**
- **Three Layout Options** with standardized professional covers:
  1. **Image Grid** - 2×2 images per page with compact metadata
  2. **Detailed Report** - 1 image per page with complete topic information
  3. **Executive Summary** - Cover page with statistics + optimized image layout
- **Embedded Images** - Base64 encoding with aspect ratio preservation
- **Project Statistics** - Comprehensive metrics on every cover page
- **Template Filenames** - Intelligent naming with project and date variables

## 📱 Screenshots

<table>
  <tr>
    <td width="50%">
      <h3>🖼️ NEW: Professional Image Lightbox</h3>
      <a href="https://github.com/user-attachments/assets/29cf8efc-bb7b-4d6a-8d64-04548fc5fc8b">
        <img src="https://github.com/user-attachments/assets/29cf8efc-bb7b-4d6a-8d64-04548fc5fc8b" alt="BCFSleuth V2.0 Image Lightbox" width="100%"/>
      </a>
      <p><em>Full-screen image viewing with zoom, navigation, and metadata</em></p>
    </td>
    <td width="50%">
      <h3>📊 NEW: Image Download & PDF Reports</h3>
      <a href="https://github.com/user-attachments/assets/c5244e3a-7f53-4958-901d-c2f25e6c188a">
        <img src="https://github.com/user-attachments/assets/c5244e3a-7f53-4958-901d-c2f25e6c188a" alt="Image Downloads and PDF Generation" width="100%"/>
      </a>
      <p><em>Individual, bulk, and ZIP downloads with PDF report generation</em></p>
    </td>
  </tr>
  <tr>
    <td width="50%">
      <h3>🔍 Enhanced Data Exploration</h3>
      <a href="https://github.com/user-attachments/assets/152c08b9-fc4b-4c03-bc80-b58609057227">
        <img src="https://github.com/user-attachments/assets/152c08b9-fc4b-4c03-bc80-b58609057227" alt="Advanced Preview with Universal BCF Support" width="100%"/>
      </a>
      <p><em>Professional data table with universal BCF format support</em></p>
    </td>
    <td width="50%">
      <h3>⚙️ Enterprise Configuration</h3>
      <a href="https://github.com/user-attachments/assets/6499579b-08e1-4826-84fc-630605ad60d5">
        <img src="https://github.com/user-attachments/assets/6499579b-08e1-4826-84fc-630605ad60d5" alt="Configuration Management System" width="100%"/>
      </a>
      <p><em>Template management working across all BCF versions</em></p>
    </td>
  </tr>
</table>

### **🖼️ Complete Image Viewer System - V2.0 Phase 1**
<img width="1286" height="1080" alt="BCFSleuth_V02_Phase1_Image_Viewer" src="https://github.com/user-attachments/assets/2df41022-5d8b-4531-b320-de2cb6c9b932" />

*Complete image management interface showing extracted images, bulk download controls, PDF report generation options, and professional lightbox system with zoom controls and navigation.*


> 💡 **Click any screenshot to view full size**

## 🌟 **Live Demo** 
**[Experience BCFSleuth V2.0 HERE](https://thebimsider.github.io/bcfsleuth/V02/)**

## Overview

BCFSleuth V2.0 is a comprehensive, client-side BCF management platform that transforms how teams work with Building Collaboration Format files. Features universal BCF format support (2.0/2.1/3.0), complete image management with professional viewing and download capabilities, advanced data exploration, intelligent field discovery, and enterprise-grade configuration management. Built with modern web technologies for secure, fast, browser-based processing.

## ✅ **Current Features - V2.0 Phase 1 Complete**

### 🖼️ **Complete Image Management System (V2.0 Phase 1 - NEW)**
- **🔍 Professional Lightbox System**: Full-screen image viewing with advanced controls
  - Mouse wheel zoom in/out with smooth scaling
  - Keyboard shortcuts: +/- (zoom), 0 (reset), F (fit to screen), arrows (navigate), ESC (close)
  - Click zoom controls with visual feedback
  - Image metadata display in professional header
  - Touch-friendly mobile support with pinch zoom and swipe navigation

- **📥 Advanced Download Functionality**: Complete file management with progress tracking
  - **Individual Downloads**: Smart filenames with project/topic/date formatting
  - **Bulk Downloads**: Sequential processing with 500ms delays and time estimates
  - **ZIP Archives**: Professional compression with organized folder structure
  - **Progress Feedback**: Real-time tracking with cancellation support
  - **User Warnings**: Intelligent alerts for large collections (50+ images)

- **📄 Professional PDF Report Generation**: Three standardized layouts with embedded images
  - **Image Grid Layout**: 2×2 images per page with compact metadata
  - **Detailed Report Layout**: 1 image per page with complete topic information  
  - **Executive Summary Layout**: Professional cover page with project statistics + optimized image display
  - **Standardized Cover Pages**: Consistent professional appearance across all report types
  - **Embedded Base64 Images**: Full image quality with aspect ratio preservation
  - **Smart Filename Generation**: Template-based naming with project/date variables

### 🌐 **Universal BCF Format Support (V1.0 Complete)**
- **🔍 Intelligent Format Detection**: Multi-layer validation with 100% accuracy
- **📋 Complete BCF 2.0 Support**: Full backward compatibility with legacy files
- **📈 Enhanced BCF 2.1 Support**: Extensions.xsd integration and improved reliability
- **🆔 Advanced BCF 3.0 Support**: Latest specification with enhanced features:
  - **ServerAssignedId**: Enterprise server-controlled topic identification
  - **Multiple ReferenceLinks**: Support for multiple reference links per topic
  - **DocumentReferences**: New document reference structure with DocumentGuid/Url
  - **Documents.xml Support**: Complete document management system parsing
  - **Enhanced Header Files**: Improved file reference and IFC integration
- **🎯 Smart UI Adaptation**: BCF 3.0 fields only appear when relevant content detected
- **🔄 Seamless Cross-Version Processing**: Handle mixed BCF formats in single session

### 🧠 **Intelligent Field Discovery (V1.0 Complete)**
- **Dynamic Content Adaptation**: UI builds itself from actual BCF file content
- **Version-Aware Intelligence**: Automatic BCF 2.0 (20 fields) vs 2.1 (22 fields) vs 3.0 (25+ fields) detection
- **Extensions.xsd Integration**: Complete parsing of custom field definitions and taxonomies
- **Custom Value Detection**: Project-specific status, type, priority scheme discovery
- **Vendor Field Support**: Unlimited discovery of custom XML elements from any authoring tool

### 🔍 **Advanced Data Preview & Exploration (V1.0 Complete)**
- **Professional Tabbed Interface**: Simple Preview | Advanced Preview | Configuration
- **Enterprise Data Table**: Professional features for large datasets
  - Sortable columns with visual indicators across all data types
  - Multi-criteria filtering (Search, Status, Priority, Assigned To, Due Date)
  - Intelligent pagination (25/50/100 rows) with performance optimization
  - Expandable comment system with individual topic control
  - Universal search across all fields with instant results
- **Real-Time Statistics Dashboard**: Live metrics with filter integration
- **Professional Tooltip System**: Full-text display with intelligent positioning
- **Export Preview Integration**: Table shows exactly what will be exported

### ⚙️ **Enterprise Configuration Management (V1.0 Complete)**
- **Universal Template System**: Field selection templates working across all BCF formats
- **Complete CRUD Operations**: Create, edit, apply, delete with professional interface
- **Team Collaboration**: Template import/export via JSON for standardization
- **Smart Filename Templates**: Variable substitution with project/date/time integration
- **Session Persistence**: All preferences and templates saved between browser sessions
- **Processing History**: Automatic tracking with detailed metrics and CSV export
- **User Preferences**: Customizable defaults for format, pagination, tooltips

### 📊 **Enhanced Export System (V1.0 Complete)**
- **Professional CSV Export**: Hierarchical structure optimized for analysis across all BCF formats
- **Excel Report Generation**: RFI-style formatting with headers, styling, spacing
- **Universal BCF 3.0 Integration**: Complete export of ServerAssignedId, DocumentReferences, ReferenceLinks
- **Dynamic Field Selection**: Export any combination of discovered fields with template support
- **Custom Field Export**: Include vendor-specific data in professional reports
- **Export Preview**: Advanced table integration showing exact export content

## **New in V2.0 Phase 1: Image System Details**

### **🔍 Enhanced Lightbox Features**
- **Professional Modal Design**: Full-screen overlay with clean, modern interface
- **Advanced Zoom System**:
  - Mouse wheel zoom with smooth 0.1x increments
  - Keyboard shortcuts: + (zoom in), - (zoom out), 0 (reset zoom), F (fit to screen)
  - Click controls with visual feedback and hover states
  - Zoom limits: 0.1x to 5.0x with intelligent boundaries
- **Smart Navigation**:
  - Arrow key navigation with cycling (left/right arrows, wrap at ends)
  - Click arrows with professional styling and touch support
  - ESC key to close with proper event handling
- **Mobile Touch Excellence**:
  - Pinch zoom with gesture recognition
  - Swipe navigation for touch devices
  - Touch-friendly control sizing (44px+ touch targets)
  - Responsive design adapting to screen sizes

### **📥 Professional Download System**
- **Intelligent Filename Generation**:
  ```
  Format: ProjectName_TopicTitle_View1_2025-08-04.png
  Example: Site_Office_HVAC_Issue_View1_2025-08-04.png
  ```
  - Smart sanitization removing invalid filename characters
  - Length limiting with intelligent truncation
  - Conflict prevention with automatic numbering

- **Bulk Download Excellence**:
  - Sequential processing with 500ms delays preventing browser overload
  - Progress tracking with percentage completion and time estimates
  - User warnings for large collections (50+ images)
  - Cancellation support for long-running operations

- **ZIP Archive Creation**:
  ```
  Structure: ProjectName_BCF_Images_2025-08-04.zip
  Contents: /images/organized_by_topic/
  ```
  - Professional folder organization by topic
  - Size estimation with user guidance
  - Fast compression using optimized JSZip algorithms

### **📄 PDF Report Generation Excellence**
- **Three Professional Layouts**:
  1. **Image Grid**: Compact 2×2 layout with essential metadata
  2. **Detailed Report**: Full-page images with complete topic information
  3. **Executive Summary**: Professional cover + optimized image display

- **Standardized Cover Pages**: All reports feature consistent, professional covers with:
  - Project information and BCF statistics
  - Generation date and image counts
  - Professional branding and layout
  - Comprehensive project metrics

- **Technical Excellence**:
  - Embedded base64 images with full quality preservation
  - Aspect ratio preservation with intelligent scaling
  - Complete metadata integration with text wrapping
  - Professional formatting with headers, spacing, borders

## Getting Started

### Quick Start (Use Live Demo)
1. Open [BCFSleuth V2.0 Live Demo](https://thebimsider.github.io/bcfsleuth/V01/)
2. Drag and drop your BCF file(s) (supports 2.0, 2.1, 3.0 formats)
3. **NEW: Image Management**
   - View extracted images in professional gallery
   - Click any image to open full-screen lightbox
   - Use zoom controls (mouse wheel, +/-, 0, F keys)
   - Navigate with arrows or swipe on mobile
   - Download individual images with smart filenames
   - Bulk download all images with progress tracking
   - Create ZIP archives for easy sharing
   - Generate professional PDF reports (3 layout options)
4. **Data Exploration**: Switch to Advanced Preview for:
   - Search across all fields and BCF versions
   - Filter by Status, Priority, Assigned To, Due Date
   - Sort columns with visual indicators
   - Expand/collapse comments (click blue ▶ arrows)
   - Paginate through large datasets
5. **Configuration**: Manage templates and preferences:
   - Create export templates from field selections
   - Import/export templates for team sharing
   - Set user preferences and defaults
   - View processing history
6. **Professional Export**: Choose format and download:
   - **CSV**: Hierarchical data for analysis
   - **Excel**: Professional reports for stakeholders

### Self-Hosted Setup

#### Option 1: Fork the Repository
```bash
# Fork on GitHub, then clone your fork
git clone https://github.com/[your-username]/bcfsleuth.git
cd bcfsleuth

# No build process needed - pure HTML/CSS/JavaScript
# Serve files using any web server
```

#### Option 2: Direct Download
```bash
# Download latest release
wget https://github.com/TheBIMsider/bcfsleuth/archive/refs/heads/main.zip
unzip main.zip
cd bcfsleuth-main

# Or clone directly
git clone https://github.com/TheBIMsider/bcfsleuth.git
cd bcfsleuth
```

#### Hosting Options

**Local Development:**
```bash
# Python 3
python -m http.server 8000

# Node.js
npx serve .

# PHP
php -S localhost:8000
```

**Production Hosting:**
- **GitHub Pages**: Fork repo, enable Pages in Settings
- **Netlify**: Drag folder to netlify.com or connect GitHub repo
- **Vercel**: Import GitHub repo at vercel.com
- **Traditional Hosting**: Upload to any web server (Apache, Nginx, IIS)

## 🔒 Data Privacy & Security

### **Complete Client-Side Processing**
BCFSleuth V2.0 maintains absolute data privacy:

- **🏠 Local Processing Only**: All BCF data, images, and analysis remain in your browser
- **🔐 Zero Data Transmission**: Images and BCF content never leave your device
- **👤 Complete User Isolation**: Each browser maintains separate data and templates
- **🚫 No Accounts Required**: No registration, logins, or server-side storage
- **🌐 Universal Format Privacy**: Consistent security across all BCF versions

### **Image Management Privacy**
- **Local Image Processing**: All image extraction and manipulation in-browser
- **Client-Side PDF Generation**: Complete PDF creation without server involvement
- **Secure Download System**: Direct browser downloads with no intermediate storage
- **ZIP Creation**: Archive generation entirely client-side using local processing

## **Advanced Image Management (V2.0 Phase 1)**

### **Professional Image Gallery**
- **Lazy Loading System**: Efficient memory management for large image collections
- **Thumbnail Grid**: Organized display with topic grouping and metadata
- **Performance Optimization**: Tested with 309+ images maintaining smooth operation
- **Mobile Responsive**: Touch-optimized gallery with swipe and pinch support

### **Enterprise Download Features**
- **Smart Filename Templates**: Configurable patterns with project/topic/date variables
- **Progress Management**: Real-time tracking with time estimates and cancellation
- **Bulk Operation Optimization**: Sequential processing preventing browser overload
- **Professional File Organization**: Structured folder systems in ZIP archives

### **PDF Report System**
- **Layout Selection Dialog**: Visual interface for choosing report format
- **Template Integration**: PDF generation works with export field templates
- **Professional Quality**: Enterprise-ready reports suitable for client presentations
- **Comprehensive Statistics**: Project metrics and image counts on cover pages

## **Development**

### **Project Architecture (V2.0)**
```
bcfsleuth/
├── index.html              # Enhanced application with image management UI
├── css/
│   └── style.css           # Complete styling (~2400 lines) with image viewer
├── js/
│   ├── app.js              # Core application with universal BCF support
│   ├── advanced-preview.js # Advanced data table with BCF 3.0 integration
│   ├── configuration.js    # Enterprise configuration management
│   ├── bcf-parser.js       # Universal BCF parsing (2.0/2.1/3.0)
│   ├── csv-exporter.js     # Enhanced CSV export with BCF 3.0 fields
│   ├── excel-exporter.js   # Professional Excel export with formatting
│   └── image-viewer.js     # Complete image management system (~850 lines)
└── README.md               # This comprehensive documentation
```

### **Dependencies**
- **JSZip 3.10.1**: BCF extraction and ZIP archive creation
- **SheetJS 0.18.5**: Professional Excel generation with formatting
- **jsPDF 3.0.1**: PDF report generation with embedded images (NEW)
- **Vanilla JavaScript**: No framework dependencies for maximum compatibility

### **V2.0 Phase 1 Technical Achievements**
- **1,300+ Lines Added**: Production-quality code with comprehensive documentation
- **54 New Methods**: Complete image management system with modular architecture
- **3 PDF Layout Engines**: Professional report generation with standardized covers
- **Advanced Error Handling**: Comprehensive validation and user feedback
- **Mobile Optimization**: Touch-friendly controls across all new features

## **Performance Metrics (V2.0)**

- **BCF Processing**: < 2 seconds across all formats (2.0, 2.1, 3.0)
- **Image Operations**: 309+ images handled efficiently with lazy loading
- **Lightbox Performance**: < 500ms image display with smooth zoom
- **Download System**: Sequential bulk downloads with intelligent delays
- **PDF Generation**: < 5 seconds for detailed reports with embedded images
- **ZIP Creation**: Optimized compression for large image collections
- **Advanced Table**: < 1 second rendering for 50-row pages
- **Mobile Response**: Touch-optimized with proper gesture recognition

## **Browser Compatibility (V2.0)**

Enhanced compatibility for image management features:
- ✅ **Chrome 90+** (Recommended - full PDF and image support)
- ✅ **Firefox 85+** (Complete functionality verified)
- ✅ **Safari 14+** (Image viewer and downloads working)
- ✅ **Edge 90+** (Full compatibility validated)

## **Testing & Validation**

**BCFSleuth V2.0 comprehensively tested with:**

### **Universal BCF Compatibility**
- ✅ **All BCF Formats**: 2.0, 2.1, 3.0 from multiple authoring tools
- ✅ **Large Datasets**: Files with 100+ topics and 300+ images
- ✅ **Complex Projects**: Mixed BCF versions with extensive metadata
- ✅ **Custom Extensions**: Project-specific taxonomies and vendor fields

### **Image Management Excellence**
- ✅ **Large Image Collections**: 309+ images with efficient processing
- ✅ **Mobile Touch Interface**: Pinch zoom, swipe navigation verified
- ✅ **Bulk Operations**: Sequential downloads with progress tracking
- ✅ **PDF Generation**: All three layouts with embedded image quality
- ✅ **ZIP Archives**: Professional compression and folder organization

### **Enterprise Features**
- ✅ **Template Systems**: Create, edit, apply across all BCF formats
- ✅ **Session Persistence**: Configuration survival across browser restarts
- ✅ **Processing History**: Comprehensive tracking through multiple sessions
- ✅ **Team Collaboration**: Template import/export with conflict resolution

## **Development Roadmap**

### **Version 2.0 Status**
- **✅ Phase 1: Complete Image Management System** - **COMPLETE**
  - Professional lightbox with zoom and navigation
  - Advanced download system (individual, bulk, ZIP)
  - PDF report generation with three professional layouts
  - Mobile optimization with touch controls

### **Version 2.0 Future Phases**
- **🚀 Phase 2: Advanced Analytics Dashboard** - **PLANNED**
  - Statistical analysis engine with D3.js visualizations
  - Interactive charts for issue trends and resolution patterns
  - Custom dashboard builder with drag-and-drop layouts
  - Comparative analysis tools for multi-project benchmarking

## **Contributing**

We welcome contributions to BCFSleuth V2.0! Please feel free to:
- 🐛 Report bugs via GitHub Issues
- 💡 Suggest new features or improvements
- 🔧 Submit pull requests for enhancements
- 📝 Improve documentation and examples

### **Development Process**
- **AI-Assisted Development**: Human expertise + AI implementation capabilities
- **Quality Standards**: Enterprise-grade code with comprehensive testing
- **User-Centric Design**: Real BCF workflows drive feature priorities
- **Performance Focus**: Client-side optimization for all operations

## **License**

This project is licensed under the BSD-3-Clause License - see the [LICENSE](LICENSE) file for details.

## **Acknowledgments**

BCFSleuth is inspired by the original [Sloth](https://www.bim42.com/products/sloth.html) application created by **[Simon Moreau](https://www.linkedin.com/in/moreausimon/)** at **[BIM42](https://www.bim42.com/)**. We're grateful for his pioneering work in BCF processing and open-source contributions to the AECO community.

- Original Sloth project: [GitHub Repository](https://github.com/simonmoreau/Sloth)
- BIM42 website: [bim42.com](https://www.bim42.com)

## About BCF

The Building Collaboration Format (BCF) is an open file format supporting workflow communication in BIM processes. Learn more at [buildingSMART International](https://www.buildingsmart.org/standards/bsi-standards/bim-collaboration-format/).

## Support & Feedback

- 🐛 **Issues**: Report bugs or request features via GitHub Issues
- 💡 **Feature Requests**: Suggest improvements for future phases
- 📧 **Contact**: Reach out via GitHub for questions or collaboration
- 🌟 **Feedback**: Share your V2.0 experience and suggestions

---

*Built with ❤️ & 🤖 AI assistance for the AECO community*  
*V2.0 Phase 1 Complete: Universal BCF Platform with Complete Image Management*  
*Next: Phase 2 - Advanced Analytics Dashboard*
